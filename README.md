# SmartBase

![logo](pics/logo1.png)
## ğŸš€ ä»‹ç»`
ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„flinkçš„å¼‚æ„æ•°æ®å¤„ç†å¹³å°ã€‚æ”¯æŒ`mysql`,`redis`,`kafka`,`hdfs`,`hbase`ç­‰å¸‚é¢ä¸Šå¤§éƒ¨åˆ†ä¸»æµæ¶ˆæ¯å­˜å‚¨ç³»ç»Ÿçš„å¤šæºå¼‚æ„æ•°æ®è½¬æ¢ï¼ŒåŒæ—¶æ”¯æŒç”Ÿæˆ`CSV`ï¼Œ`TXT`ç­‰æ ¼å¼çš„å¤„ç†ç»“æœã€‚æä¾›ä½ä»£ç çš„å‰ç«¯äº¤äº’ç•Œé¢ï¼Œé€šè¿‡é…ç½®æ–¹å¼ä¸Šä¼ ä»»åŠ¡è‡³é›†ç¾¤ï¼Œé€šè¿‡å¹³å°å¯è§†åŒ–æŸ¥çœ‹ä»»åŠ¡ç»“æœã€‚

## ğŸ— è½¯ä»¶æ¶æ„
é¡¹ç›®é€šè¿‡linuxé›†ç¾¤è¿è¡Œã€‚åŒ…å«ä¸‰ä¸ª`flink-core`ï¼Œ`Universal-pipe`ï¼Œ`smartBase-console`æ ¸å¿ƒæ¶æ„.
- ä»»åŠ¡å¤„ç†æ¶æ„ä¸º`flink-yarn`é›†ç¾¤ï¼Œé€šè¿‡`yarn-session`è¿è¡Œä»»åŠ¡ï¼Œ`slot`å¯ä»¥æŒ‰éœ€ä½¿ç”¨ï¼Œæé«˜é›†ç¾¤çš„èµ„æºåˆ©ç”¨ç‡ã€‚åŒæ—¶é…ç½®é«˜å¯ç”¨ï¼Œ`Job-Manager`å¯ä»¥ä¸`task-manager`å®•æœºæ—¶è‡ªåŠ¨è½¬æ¢ã€‚
- webé¡¹ç›®äº¤äº’æ­å»ºåœ¨Springbootæ¡†æ¶ä¸Šï¼Œä½¿ç”¨kafkaè´Ÿè½½å‡è¡¡é›†ç¾¤ä½œä¸ºä»»åŠ¡ä¸Šä¼ ä¸ç»“æœçš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚
- logsè¿”å›è‡³æ¶ˆæ¯æœåŠ¡å™¨ï¼ˆspringbootï¼‰ï¼Œä¼ å›è‡³å‰ç«¯ã€‚
    - [springbooté“¾æ¥](https://gitee.com/StarGrys/smart-base)
- å‰ç«¯ä½¿ç”¨Angularæ¡†æ¶ã€‚
    - [å‰ç«¯é“¾æ¥](https://gitee.com/det0cte/smart-base-web-dashborad)


### ğŸ³â€ğŸŒˆ ç»„æˆéƒ¨åˆ†

#### 1ï¸âƒ£ flink-core

`flink-core` å®šä½æ˜¯ä¸€ä¸ªflinkå¤„ç†æ¡†æ¶ï¼Œå…³æ³¨ç¼–ç å¼€å‘ï¼Œè§„èŒƒäº†å‚æ•°ï¼ŒæŒ‰ç…§çº¦å®šä¼˜äºé…ç½®çš„æ–¹å¼è¿›è¡Œå¼€å‘ï¼Œèåˆäº†`DataStream` å’Œ `Flink sql` apiï¼Œç®€åŒ–ç¹ççš„æ“ä½œï¼Œèšç„¦ä¸šåŠ¡æœ¬èº«ï¼Œæé«˜å¼€å‘æ•ˆç‡å’Œå¼€å‘ä½“éªŒ

#### 2ï¸âƒ£ Universal-pipe

`pipe` æ˜¯æ°´ç®¡çš„æ„æ€ï¼Œ`Universal-pipe` çš„å®šä½æ˜¯ä¸€ä¸ªæ•°æ®æŠ½å–çš„å¤„ç†é›†ç¾¤ï¼ŒåŸºäº `Hadoop`ï¼Œ`Yarn`ç­‰å¯¹äº`flink-core` ä¸­æä¾›çš„å„ç§ï¼Œæ•°æ®æºå¼€å‘ï¼Œç›®çš„æ˜¯æ‰“é€ ä¸€ä¸ªç¨³å®šé«˜æ•ˆçš„æ•°æ®å¤„ç†ç»ˆç«¯é›†ç¾¤ï¼Œå¹¶ä¸”é›†æˆåˆ° `smartBase-console` ä¸­ï¼Œè§£å†³å®æ—¶æ•°æ®æºè·å–é—®é¢˜ã€‚

#### 3ï¸âƒ£ smartBase-console

`smartBase-console` æ˜¯ä¸€ä¸ªç»¼åˆå®æ—¶æ•°æ®å¹³å°ï¼Œä½ä»£ç (`Low Code`)å¹³å°ï¼Œå¯ä»¥è¾ƒå¥½çš„ç®¡ç†`Flink`ä»»åŠ¡ï¼Œé›†æˆäº†é¡¹ç›®ç¼–è¯‘ã€å‘å¸ƒã€å‚æ•°é…ç½®ã€å¯åŠ¨ã€`savepoint`ï¼Œç«ç„°å›¾(`flame graph`â€”â€”å¾…å®Œæˆ)ï¼Œ`Flink SQL`ï¼Œ ç›‘æ§ç­‰è¯¸å¤šåŠŸèƒ½äºä¸€ä½“ï¼Œå¤§å¤§ç®€åŒ–äº† `Flink` ä»»åŠ¡çš„æ—¥å¸¸æ“ä½œå’Œç»´æŠ¤ï¼Œèåˆäº†è¯¸å¤šæœ€ä½³å®è·µã€‚å…¶æœ€ç»ˆç›®æ ‡æ˜¯æ‰“é€ æˆä¸€ä¸ªå®æ—¶æ•°ä»“ï¼Œæµæ‰¹ä¸€ä½“çš„ä¸€ç«™å¼å¤§æ•°æ®è§£å†³æ–¹æ¡ˆï¼Œè¯¥å¹³å°ä½¿ç”¨ä½†ä¸ä»…é™ä»¥ä¸‹æŠ€æœ¯:

* [Apache Flink](http://flink.apache.org)
* [Apache YARN](http://hadoop.apache.org)
* [Spring Boot](https://spring.io/projects/spring-boot/)
* [Mybatis](http://www.mybatis.org)
* [Mybatis-Plus](http://mp.baomidou.com)
* [Flame Graph](http://www.brendangregg.com/FlameGraphs)
* [JVM-Profiler](https://github.com/uber-common/jvm-profiler)
* [Angular](https://angular.cn/)
* [Ant Design](https://antd.com/)
* [Apifox](https://gitee.com/apifox/)
* ...

![é¡¹ç›®æ€»ä½“æ¶æ„](pics/MetaFlink2.png)


## ğŸª é›†ç¾¤é…ç½®
-  **ç¯å¢ƒè¯´æ˜** ï¼š ä»¥ä¸‹ä¸ºé¡¹ç›®è¿è¡Œæ‰€éœ€ç¯å¢ƒï¼ŒæŒ‰ä»¥ä¸‹é…ç½®ä¸ä¼šå‡ºç°ç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ã€‚
    - é›†ç¾¤ï¼š`Linux`: CentOS-3.10.0-862.el7.x86_64 * 3
    - `gcc`ï¼š 4.8.5 20150623 (Red Hat 4.8.5-44) (GCC) 
    - `java`ï¼š1.8.0_212
    - `redis`ï¼š6.2.1
    - `kafka`ï¼š2.13-3.1.0
    - `hadoop`ï¼š3.1.3
    - `flink`ï¼š1.13.2
    - `zookeeper`: 3.5.7
    
-  **æ¨¡å—é…ç½®** 
    1.  `Linux`ï¼Œ`gcc`ï¼Œ`java` è¯·è‡ªè¡Œç™¾åº¦
    2.  [redisæ–‡æ¡£](docs/redis.md)
    3.  [kafkaæ–‡æ¡£](docs/kafka.md)
    4.  [flinkæ–‡æ¡£](docs/flink.md)
    5.  [mysqlæ–‡æ¡£](docs/mysql.md)


## ğŸ¦ åŠŸèƒ½æ¦‚è¦
-  **ç›®å‰æ”¯æŒçš„åŠŸèƒ½æœ‰**
    - restfulä¼ å‚æ‰§è¡Œä»»åŠ¡
    - å¯è§†åŒ–ç•Œé¢ï¼ˆéƒ¨åˆ†ï¼‰- å¢åˆ æŸ¥ä»»åŠ¡ï¼ŒåŠ¨æ€åŠ è½½ï¼Œç”¨æˆ·ä¸Šä¼ ï¼Œé¡µé¢ç¼–è¾‘
    - `kafka`->`json`
    - `kafka->`mysql`
    - `mysql->`Java Class`
    - `mysql->`kafka
    - `mysql->`localhost`,`hdfs`(txt/csv) 
    - å¤š`mysql`æº->`mysql` èšåˆåŒæ­¥
    - `redis`->`localhost`,`hdfs`(txt/csv)
    - è‡ªå®šä¹‰ç«¯å£æ•°æ®å›ºå®šæ ¼å¼ä¼ è¾“ï¼šï¼Œç›®å‰æ”¯æŒ","åˆ†å‰²
    - `port`->`mysql`
    - `port`->`kafka`
    - `port`->`redis`
    - `port`->`localhost`,`hdfs`(txt/csv)
    - è‡ªå®šä¹‰ç«¯å£æ•°æ®è‡ªå®šä¹‰jsonä¼ è¾“ï¼šåªéœ€å¼€å¯ä¸€ä¸ªä»»åŠ¡å³å¯å®Œæˆä¼ è¾“è‡³ä»»æ„æ•°æ®æºï¼ˆé€šè¿‡é…ç½®jsonå‚æ•°ï¼‰
    - `port`->`Any!`

- **å¾…å®ç°çš„åŠŸèƒ½æœ‰**
    - è‡ªå®šä¹‰å¼‚æ„æ•°æ®æºä¼ è¾“
    - `Hbase`æ”¯æŒ
    - ä»ªè¡¨ç›˜


## ğŸŸ ä½¿ç”¨è¯´æ˜
1.  flinkå¯åŠ¨è¯´æ˜ï¼š
    - é¦–å…ˆå¯åŠ¨`hdfs-yarn`é›†ç¾¤

```
  cd /home/star/bin
  ./myhadoop start
```

- Yarnæ¨¡å¼å¯åŠ¨flinké›†ç¾¤-sessionæ¨¡å¼â€”â€”è¯¦ç»†é…ç½®è§ï¼š[flinkæ–‡æ¡£](docs/flink.md)

- ```
  ./yarn-session.sh -nm test -d
  ```


## ğŸ å¼€å‘è€…è¯´æ˜
-  **æ¨¡å—é…ç½®** 
    1.  [Flinkå†…éƒ¨ä¼ å‚æ–‡æ¡£](docs/Parameter.md)
    1.  [ApiFoxè¯·æ±‚æ¥å£æ–‡æ¡£](docs/interfaceTest.md)


## ğŸ‡ å‚ä¸è´¡çŒ®

1. è´¡çŒ®ä»£ç 
2. è½¯ä»¶åŠŸèƒ½æµ‹è¯•
3. è¯·æˆ‘åƒè–¯ç‰‡
4. å…³æ³¨**å˜‰ç„¶ä»Šå¤©åƒä»€ä¹ˆï¼ˆbushiï¼ï¼‰**

 

## ğŸ”ª ç‰¹æŠ€

1.  è€éº»æŠ„æ‰‹åƒ20ä¸ªåŠ è±†çš®åŠ å¤è›‹
2.  æ™šä¸Šä¸ç¡æ—©ä¸Šä¸èµ·
3.  è‹±é›„è”ç›Ÿè‰¾æ¬§å°¼äºšé“‚é‡‘
4.  æ¡¥ç‰Œä¸ƒæ— å°†å¤§å¸ˆ(æŠŠæŠŠç¡¬å«7NT)
5.  15ç§’é€Ÿé€šç†å¡˜ï¼